(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},96640,e=>{"use strict";var t=e.i(43476),i=e.i(46932);let a={critical:"bg-rose-500/20 text-rose-400 border-rose-500/30",warning:"bg-amber-500/20 text-amber-400 border-amber-500/30",success:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",info:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",default:"bg-white/10 text-white/70 border-white/20"},s={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-xs",lg:"px-4 py-1.5 text-sm"};function l({children:e,variant:l="default",size:n="md",pulse:r=!1,icon:d,className:c=""}){return(0,t.jsxs)(i.motion.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`
        inline-flex items-center gap-1.5 rounded-full border font-semibold
        ${a[l]}
        ${s[n]}
        ${c}
      `,children:[r&&(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,t.jsx)("span",{className:`
              animate-ping absolute inline-flex h-full w-full rounded-full opacity-75
              ${"critical"===l?"bg-rose-400":""}
              ${"warning"===l?"bg-amber-400":""}
              ${"success"===l?"bg-emerald-400":""}
              ${"info"===l?"bg-cyan-400":""}
              ${"default"===l?"bg-white/50":""}
            `}),(0,t.jsx)("span",{className:`
              relative inline-flex rounded-full h-2 w-2
              ${"critical"===l?"bg-rose-500":""}
              ${"warning"===l?"bg-amber-500":""}
              ${"success"===l?"bg-emerald-500":""}
              ${"info"===l?"bg-cyan-500":""}
              ${"default"===l?"bg-white/70":""}
            `})]}),d,e]})}let n={P1_CRITICAL:{label:"Critical",variant:"critical"},P2_HIGH:{label:"High",variant:"warning"},P3_MEDIUM:{label:"Medium",variant:"info"},P4_LOW:{label:"Low",variant:"default"},P5_INFO:{label:"Info",variant:"success"}};function r({priority:e}){let i=n[e];return(0,t.jsx)(l,{variant:i.variant,pulse:"P1_CRITICAL"===e,children:i.label})}let d={ACTIVE:{label:"Active",variant:"success"},SLOW_MOVING:{label:"Slow Moving",variant:"warning"},NON_MOVING:{label:"Non-Moving",variant:"critical"},DEAD_STOCK:{label:"Dead Stock",variant:"critical"}};function c({status:e}){let i=d[e];return(0,t.jsx)(l,{variant:i.variant,pulse:"DEAD_STOCK"===e||"NON_MOVING"===e,children:i.label})}e.s(["Badge",()=>l,"MovementBadge",()=>c,"PriorityBadge",()=>r])},3764,e=>{"use strict";var t=e.i(43476),i=e.i(46932);function a({className:e="",variant:i="rectangular",width:a,height:s}){return(0,t.jsx)("div",{className:`skeleton ${{text:"rounded",circular:"rounded-full",rectangular:"rounded-xl"}[i]} ${e}`,style:{width:a,height:s||("text"===i?"1em":void 0)}})}function s(){return(0,t.jsxs)("div",{className:"glass-card p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(a,{width:120,height:16,variant:"text"}),(0,t.jsx)(a,{width:40,height:40,variant:"circular"})]}),(0,t.jsx)(a,{width:80,height:32,variant:"text"}),(0,t.jsx)(a,{width:"100%",height:8,variant:"text"})]})}function l({height:e=300}){return(0,t.jsxs)("div",{className:"glass-card p-6",children:[(0,t.jsx)(a,{width:150,height:20,variant:"text",className:"mb-4"}),(0,t.jsx)("div",{className:"flex items-end gap-2 justify-around",style:{height:e-60},children:[40,65,45,80,55,70,50].map((e,s)=>(0,t.jsx)(i.motion.div,{initial:{height:0},animate:{height:`${e}%`},transition:{duration:.5,delay:.1*s},children:(0,t.jsx)(a,{width:40,height:"100%"})},s))})]})}function n({rows:e=5}){return(0,t.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,t.jsx)("div",{className:"flex gap-4 p-4 border-b border-white/10",children:[100,150,120,80,100].map((e,i)=>(0,t.jsx)(a,{width:e,height:12,variant:"text"},i))}),Array.from({length:e}).map((e,i)=>(0,t.jsx)("div",{className:"flex gap-4 p-4 border-b border-white/5 last:border-b-0",children:[100,150,120,80,100].map((e,i)=>(0,t.jsx)(a,{width:e,height:16,variant:"text"},i))},i))]})}e.s(["CardSkeleton",()=>s,"ChartSkeleton",()=>l,"TableSkeleton",()=>n])},35408,e=>{"use strict";let t=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>t],35408)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},54154,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(46932),s=e.i(63327),l=e.i(3374),n=e.i(18635),r=e.i(70505),d=e.i(96640),c=e.i(35586),o=e.i(3764),h=e.i(79704),x=e.i(25652),m=e.i(35408),u=e.i(75254);let j=(0,u.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),f=(0,u.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var g=e.i(40160),b=e.i(36764),v=e.i(22016);function p(){let[e,u]=(0,i.useState)(),[p,w]=(0,i.useState)(),{data:N,isLoading:y,refetch:S}=(0,h.useDemandShifts)({location:e,direction:p}),_={total:N?.length||0,increases:N?.filter(e=>"INCREASE"===e.shift_direction).length||0,decreases:N?.filter(e=>"DECREASE"===e.shift_direction).length||0,stable:N?.filter(e=>"STABLE"===e.shift_direction).length||0},C=[{name:"Increase",value:_.increases,color:"#10b981"},{name:"Decrease",value:_.decreases,color:"#f43f5e"},{name:"Stable",value:_.stable,color:"#6b7280"}],D=[...new Set(N?.map(e=>e.location_id)||[])];return(0,t.jsxs)("div",{className:"flex min-h-screen",children:[(0,t.jsx)(s.Sidebar,{}),(0,t.jsxs)("main",{className:"flex-1 ml-64 p-6",children:[(0,t.jsx)(l.Header,{title:"Demand Shifts",subtitle:"Detect and analyze changes in demand patterns",onRefresh:S,isRefreshing:y}),(0,t.jsxs)(n.PageTransition,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)(r.StatCard,{title:"Total Shifts",value:_.total,icon:(0,t.jsx)(f,{className:"w-6 h-6"}),color:"cyan",delay:0}),(0,t.jsx)(r.StatCard,{title:"Increases",value:_.increases,icon:(0,t.jsx)(x.TrendingUp,{className:"w-6 h-6"}),color:"emerald",delay:.1}),(0,t.jsx)(r.StatCard,{title:"Decreases",value:_.decreases,icon:(0,t.jsx)(m.TrendingDown,{className:"w-6 h-6"}),color:"rose",delay:.2}),(0,t.jsx)(r.StatCard,{title:"Stable",value:_.stable,icon:(0,t.jsx)(j,{className:"w-6 h-6"}),color:"violet",delay:.3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-6",children:[(0,t.jsx)("div",{className:"xl:col-span-1",children:y?(0,t.jsx)(o.ChartSkeleton,{height:300}):(0,t.jsx)(c.DonutChart,{data:C,title:"Shift Distribution",height:250})}),(0,t.jsx)("div",{className:"xl:col-span-2",children:(0,t.jsxs)(r.GlassCard,{className:"p-6 h-full",hover:!1,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Filters"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60 mb-2 block",children:"Location"}),(0,t.jsxs)("select",{value:e||"",onChange:e=>u(e.target.value||void 0),className:"bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-cyan-500/50 min-w-[150px]",children:[(0,t.jsx)("option",{value:"",children:"All Locations"}),D.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60 mb-2 block",children:"Direction"}),(0,t.jsxs)("select",{value:p||"",onChange:e=>w(e.target.value||void 0),className:"bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-cyan-500/50 min-w-[150px]",children:[(0,t.jsx)("option",{value:"",children:"All Directions"}),(0,t.jsx)("option",{value:"INCREASE",children:"Increase"}),(0,t.jsx)("option",{value:"DECREASE",children:"Decrease"}),(0,t.jsx)("option",{value:"STABLE",children:"Stable"})]})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2 ml-auto",children:[(0,t.jsx)(b.GlowButton,{variant:"secondary",size:"md",onClick:()=>{u(void 0),w(void 0)},children:"Clear"}),(0,t.jsx)(b.IconButton,{icon:(0,t.jsx)(g.Download,{className:"w-5 h-5"}),tooltip:"Export CSV",color:"cyan"})]})]})]})})]}),(0,t.jsxs)(r.GlassCard,{className:"p-6",hover:!1,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Demand Shift Details"}),y?(0,t.jsx)(o.TableSkeleton,{rows:8}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"data-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"SKU ID"}),(0,t.jsx)("th",{children:"Location"}),(0,t.jsx)("th",{children:"Direction"}),(0,t.jsx)("th",{children:"Magnitude"}),(0,t.jsx)("th",{children:"Confidence"}),(0,t.jsx)("th",{children:"Detection Method"}),(0,t.jsx)("th",{children:"Start Date"}),(0,t.jsx)("th",{children:"Action"})]})}),(0,t.jsx)("tbody",{children:N?.slice(0,20).map((e,i)=>(0,t.jsxs)(a.motion.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.03*i},children:[(0,t.jsx)("td",{children:(0,t.jsx)(v.default,{href:`/sku/${e.item_id}`,className:"text-cyan-400 hover:text-cyan-300 font-medium",children:e.item_id})}),(0,t.jsx)("td",{className:"text-white/70",children:e.location_id}),(0,t.jsx)("td",{children:(0,t.jsxs)(d.Badge,{variant:"INCREASE"===e.shift_direction?"success":"DECREASE"===e.shift_direction?"critical":"default",children:["INCREASE"===e.shift_direction&&(0,t.jsx)(x.TrendingUp,{className:"w-3 h-3"}),"DECREASE"===e.shift_direction&&(0,t.jsx)(m.TrendingDown,{className:"w-3 h-3"}),"STABLE"===e.shift_direction&&(0,t.jsx)(j,{className:"w-3 h-3"}),e.shift_direction]})}),(0,t.jsxs)("td",{className:"text-white font-medium",children:[(100*e.shift_magnitude).toFixed(1),"%"]}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,t.jsx)(a.motion.div,{initial:{width:0},animate:{width:`${100*e.confidence_score}%`},transition:{delay:.03*i+.2,duration:.5},className:"h-full bg-gradient-to-r from-cyan-500 to-violet-500"})}),(0,t.jsxs)("span",{className:"text-white/60 text-sm",children:[(100*e.confidence_score).toFixed(0),"%"]})]})}),(0,t.jsx)("td",{className:"text-white/50 text-sm",children:e.detection_method}),(0,t.jsx)("td",{className:"text-white/50 text-sm",children:new Date(e.shift_start_date).toLocaleDateString()}),(0,t.jsx)("td",{children:(0,t.jsx)(v.default,{href:`/sku/${e.item_id}`,children:(0,t.jsx)(b.GlowButton,{variant:"secondary",size:"sm",children:"View"})})})]},`${e.item_id}-${e.location_id}`))})]})}),N&&N.length>20&&(0,t.jsxs)("p",{className:"text-center text-white/50 mt-4",children:["Showing 20 of ",N.length," results"]})]})]})]})]})}e.s(["default",()=>p],54154)}]);